import{u as E,r as l,j as s,i as N}from"./vendor-ACDtxvTX.js";import{m as me,l as q,i as Ce,a as M,y as Be,b as Ee,e as K,f as pe,c as Ae,d as je,g as De}from"./index-Dpq6Eo9c.js";const be=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}];function Fe({showModal:e,mode:t,setMode:a,limit:n,limitRef:r}){const{t:o}=E(),h=async i=>{await Be(),await N.changeLanguage(i.target.value,f=>{f&&f.some(j=>!j.message.includes("Unknown variable dynamic import"))&&(console.log(f),e({message:o("options.network"),buttons:[{message:s.jsx(se,{}),autoFocus:!0}]}))})},d=i=>{const f=i.target.value;Ee(f)&&(a(f),M("mode",f))},C=i=>{const f=i.target.value;(f==="true"||f==="false")&&M("corpus-longURL",f)};return s.jsx("div",{className:"options",children:s.jsxs("div",{className:"options-grid",children:[s.jsx("label",{htmlFor:"language",children:o("options.language")}),s.jsx("select",{name:"language",id:"language",onChange:h,defaultValue:N.language,autoFocus:!0,children:be.map(i=>s.jsx("option",{value:i.code,lang:i.code,children:i.name},i.code))}),s.jsx("label",{htmlFor:"mode",children:o("options.mode")}),s.jsx("select",{name:"mode",id:"mode",onChange:d,defaultValue:t,children:me.map(i=>s.jsx("option",{value:i,children:o(`options.modes.${i}`)},i))}),s.jsx("label",{htmlFor:"longURL",children:o("options.longURL")}),s.jsx("select",{name:"longURL",id:"longURL",onChange:C,defaultValue:q("corpus-longURL")??"false",children:["true","false"].map(i=>s.jsx("option",{value:i,children:o(`options.longURLs.${i}`)},i))}),s.jsx("label",{htmlFor:"limit",children:o("options.limit")}),s.jsx("input",{ref:r,type:"number",name:"limit",id:"limit",min:1,defaultValue:n})]})})}function se(){const{t:e}=E();return e("options.close")}function ve(e){const{t}=E(),{showModal:a,setLimit:n}=e,r=l.useRef(null),o=()=>{if(r.current!==null){const d=r.current.valueAsNumber;Ce(d)&&(M("corpus-limit",d.toString()),n(d))}},h={classes:["modal-options"],message:s.jsx(Fe,{...e,limitRef:r}),buttons:[{message:s.jsx(se,{}),callback:o}],cancelCallback:o};return s.jsxs("button",{className:"header-options",onClick:()=>a(h),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:s.jsx("path",{d:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z",fill:"currentColor"})}),t("options.options")]})}const wt=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));function xe(e){return new Worker("/poke-corpus/assets/searchWorkerManager-Dd6dZM-C.js",{name:e==null?void 0:e.name})}const we=["error","regex","noMatch","network","boolean.parentheses","boolean.quote","boolean.operand","boolean.empty"],Y=["loading","processing","collecting"],ke=["qid","ja-Hrkt","ja","en","en-GB","fr","it","de","es","ko","zh-Hans","zh-Hant"],Se={Red:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Green:{languages:["ja-Hrkt"],structured:!1,files:["data"]},Blue:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Yellow:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Gold:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Silver:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Crystal:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},RubySapphire:{id:"rs",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.1",en:"1.2",fr:"1.1",it:"1.1",de:"1.1",es:"1.1"},files:["msg"],literals:{KUN:{branch:"gender",line:[12326,12327]},VERSION:{branch:"version",line:[12329,12328]},EVIL_TEAM:{branch:"version",line:[12331,12330]},GOOD_TEAM:{branch:"version",line:[12330,12331]},EVIL_LEADER:{branch:"version",line:[12333,12332]},GOOD_LEADER:{branch:"version",line:[12332,12333]},EVIL_LEGENDARY:{branch:"version",line:[12335,12334]},GOOD_LEGENDARY:{branch:"version",line:[12334,12335]},RIVAL:{branch:"gender",line:[12337,12336]}}},FireRedLeafGreen:{id:"frlg",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.0",en:"1.1",fr:"1.0",it:"1.0",de:"1.0",es:"1.0"},files:["msg"],literals:{KUN:{branch:"gender",line:[9312,9313]}}},Emerald:{id:"e",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:"1.0",files:["msg"],literals:{KUN:{branch:"gender",line:[15083,15084]},VERSION:{line:15087},EVIL_TEAM:{line:15088},GOOD_TEAM:{line:15089},EVIL_LEADER:{line:15090},GOOD_LEADER:{line:15091},EVIL_LEGENDARY:{line:15092},GOOD_LEGENDARY:{line:15093},RIVAL:{branch:"gender",line:[15095,15094]}}},DiamondPearl:{id:"dp",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},Platinum:{id:"pt",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},HeartGoldSoulSilver:{id:"hgss",languages:["qid","ja-Hrkt","en","fr","it","de","es","ko"],structured:!0,files:["msg"]},BlackWhite:{id:"bw",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},Black2White2:{id:"b2w2",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},XY:{id:"xy",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.5",files:["common","script"]},OmegaRubyAlphaSapphire:{id:"oras",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.4",files:["common","script"]},SunMoon:{id:"sm",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"58"}},UltraSunUltraMoon:{id:"usum",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"63"}},LetsGoPikachuLetsGoEevee:{id:"lgpe",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.0.0/1.0.1/1.0.2",files:["common","script"]},SwordShield:{id:"swsh",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0/1.3.1/1.3.2",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},BrilliantDiamondShiningPearl:{id:"bdsp",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0",files:["message"],speaker:{file:"message",textFile:"dlp_speakers_name"}},LegendsArceus:{id:"la",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.1.0/1.1.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},ScarletViolet:{id:"sv",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.0.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},Colosseum:{id:"colo",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},XD:{id:"xd",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},BattleRevolution:{id:"pbr",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,version:{ja:"0/1/2",en:"0","en-GB":"0",fr:"0",it:"0",de:"0",es:"0"},files:["message"],literals:{'"No."':{branch:"language",line:{ja:992,en:993,"en-GB":993,de:994,fr:995,es:996,it:997}},'"Lv."':{branch:"language",line:{ja:998,en:999,"en-GB":999,de:1e3,fr:1001,es:1002,it:1003}},'"HP"':{branch:"language",line:{ja:1036,en:1037,"en-GB":1037,de:1038,fr:1039,es:1040,it:1041}},'"PP"':{branch:"language",line:{ja:1042,en:1043,"en-GB":1043,de:1044,fr:1045,es:1046,it:1047}}}},Box:{id:"box",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,files:["message"]},Ranch:{id:"ranch",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,version:{"ja-Hrkt":"258",en:"256","en-GB":"1",fr:"1",it:"1",de:"1",es:"1"},files:["msg"]},Bank:{id:"bank",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.5",files:["turtle"]},HOME:{id:"home",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.2.1",files:["megaturtle"]}},ye={languages:ke,collections:Se},G="qid",Ne="zxx",g=ye,_=["exact","regex","boolean"],ne=e=>_.includes(e),R=Object.keys(g.collections),He=R.filter(e=>g.collections[e].structured),ae={id:"",file:"",query:"",type:"exact",caseInsensitive:!0,common:!0,script:!0,collections:He,languages:g.languages,run:!1};function Le(e){const t={};return e.id!==void 0&&(t.id=e.id),e.file!==void 0&&(t.file=e.file),e.run!==void 0&&(t.run=e.run.toString()),new URLSearchParams({query:e.query,type:e.type,caseInsensitive:e.caseInsensitive.toString(),common:e.common.toString(),script:e.script.toString(),collections:e.collections.join(","),languages:e.languages.join(","),...t}).toString()}function qe(e){const t=new URLSearchParams(e);return{id:y(t.get("id")),file:y(t.get("file")),query:y(t.get("query")),type:Me(t.get("type"),ne),caseInsensitive:T(t.get("caseInsensitive")),common:T(t.get("common")),script:T(t.get("script")),collections:Z(t.get("collections"),R),languages:Z(t.get("languages"),g.languages),run:T(t.get("run"))}}function y(e){return e??void 0}function T(e){switch(e){case"true":return!0;case"false":return!1}}function Me(e,t){if(e!==null&&t(e))return e}function Z(e,t){if(e!==null)return e.split(",").filter(a=>t.includes(a))}const Re=R.length^g.languages.length<<4,z=2,J=Math.ceil(g.languages.length/8),Ie=Math.ceil(R.length/8),re=z+J+Ie,Pe=e=>btoa(String.fromCodePoint(...e)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),$e=e=>Uint8Array.from(atob(e.replaceAll("_","/").replaceAll("-","+")),t=>t.codePointAt(0));function ze(e){const t={};e.id!==void 0&&(t.id=e.id),e.file!==void 0&&(t.file=e.file);const a=Ve(e);return Ge(a),new URLSearchParams({...t,q:e.query,s:Pe(a)}).toString()}function Oe(e){const t=new URLSearchParams(e),a={id:y(t.get("id")),file:y(t.get("file")),query:y(t.get("q"))},n=y(t.get("s"));if(!n)return a;try{const r=new Uint8Array(re);return r.set($e(n).slice(0,r.length)),_e(r),{...a,...Te(r)}}catch{return a}}function Ve(e){const t=new Uint8Array(re);return t[1]=+(e.run??ae.run)<<0|+e.caseInsensitive<<1|+e.common<<2|+e.script<<3|_.indexOf(e.type)<<4,g.languages.forEach((a,n)=>{e.languages.includes(a)&&(t[z+Math.floor(n/8)]|=1<<n%8)}),R.forEach((a,n)=>{e.collections.includes(a)&&(t[z+J+Math.floor(n/8)]|=1<<n%8)}),t}function Te(e){const t=g.languages.filter((n,r)=>(e[z+Math.floor(r/8)]>>r%8&1)===1),a=R.filter((n,r)=>(e[z+J+Math.floor(r/8)]>>r%8&1)===1);return{run:(e[1]&1)!==0,caseInsensitive:(e[1]&2)!==0,common:(e[1]&4)!==0,script:(e[1]&8)!==0,type:_[(e[1]&48)>>4],languages:t,collections:a}}function Ge(e){const t=e[0]=oe(e);ce(t,e)}function _e(e){const t=e[0];if(ce(t,e),t!==oe(e))throw Error("invalid checksum")}function oe(e,t=1){return e.slice(t).reduce((a,n)=>a+n&255,0)^Re&255}function ce(e,t,a=1){let n=Ue(e);for(let r=a;r<t.length;r++)t[r]^=n>>24,n=We(n)}const Ue=e=>2480367069*e&4294967295,We=e=>2438952949*e+2654435769&4294967295;function U(e){return(q("corpus-longURL")==="true"?Le:ze)(e)}function Ye(e){const t=new URLSearchParams(e);return t.get("q")||t.get("s")?Oe(e):qe(e)}function Je(e,t=4){const a=[...e].map(n=>n.codePointAt(0)>255?1:.5).reduce((n,r)=>n+r,0);if(!(a<=t))return{fontSize:`${t*100/a}%`,scale:`1 ${a/t}`,whiteSpace:"nowrap"}}function Qe({collections:e,setCollections:t}){const{t:a}=E(),n=["ja","ko","zh"].some(r=>N.language.startsWith(r));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"search-collections",children:Object.keys(g.collections).map(r=>[r,a(`collections:${r}.name`),a(`collections:${r}.short`)]).map(([r,o,h])=>s.jsxs("div",{className:"search-collection",children:[s.jsx("input",{type:"checkbox",name:`collection-${r}`,id:`collection-${r}`,checked:e.includes(r),onChange:d=>{if(d.target.checked&&!e.includes(r)){const C=[];C.splice(0,0,...e),C.push(r),t(C)}else!d.target.checked&&e.includes(r)&&t(e.filter(C=>C!==r))}}),s.jsx("label",{htmlFor:`collection-${r}`,style:n?Je(h):void 0,children:s.jsx("abbr",{title:o,children:h})})]},r))}),s.jsxs("div",{className:"item-group",children:[s.jsx("button",{disabled:e.length===Object.keys(g.collections).length,onClick:()=>{t(Object.keys(g.collections))},children:a("selectAll")}),s.jsx("button",{disabled:e.length===0,onClick:()=>{t([])},children:a("deselectAll")})]})]})}function Xe({languages:e,setLanguages:t}){const{t:a}=E();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"search-languages",children:g.languages.map(n=>[n,a(`languages:${n}.name`),a(`languages:${n}.code`)]).map(([n,r,o])=>s.jsxs("div",{className:"search-language",children:[s.jsx("input",{type:"checkbox",name:`language-${n}`,id:`language-${n}`,checked:e.includes(n),onChange:h=>{if(h.target.checked&&!e.includes(n)){const d=[];d.splice(0,0,...e),d.push(n),t(d)}else!h.target.checked&&e.includes(n)&&t(e.filter(d=>d!==n))}}),s.jsxs("label",{htmlFor:`language-${n}`,children:[s.jsx("span",{className:"search-language-code",children:s.jsx("abbr",{title:r,children:o})}),s.jsx("span",{className:"search-language-name",children:r})]})]},n))}),s.jsxs("div",{className:"item-group",children:[s.jsx("button",{disabled:e.length===g.languages.length,onClick:()=>{t(g.languages)},children:a("selectAll")}),s.jsx("button",{disabled:e.length===0,onClick:()=>{t([])},children:a("deselectAll")})]})]})}function Ke({filtersVisible:e,collections:t,setCollections:a,languages:n,setLanguages:r}){return s.jsxs("div",{className:`search-filters search-filters-${e?"show":"hide"}`,children:[s.jsx(Qe,{collections:t,setCollections:a}),s.jsx("div",{className:"search-filters-divider"}),s.jsx(Xe,{languages:n,setLanguages:r})]})}const S={...ae,languages:g.languages.filter(e=>e.startsWith(N.language.split("-")[0]))||g.languages.filter(e=>e.startsWith("en"))};function Ze({status:e,postToWorker:t,terminateWorker:a}){const{t:n}=E(),[r,o]=l.useState(""),[h,d]=l.useState(""),[C,i]=l.useState(S.query),[f,j]=l.useState(S.type),[D,m]=l.useState(S.caseInsensitive),[p,B]=l.useState(S.common),[u,w]=l.useState(S.script),[A,I]=l.useState(S.collections),[L,v]=l.useState(S.languages),[k,P]=l.useState(!1),[b,x]=l.useState((q("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),O=l.useCallback(()=>{const c=Ye(window.location.hash.substring(1));c.id!==void 0&&o(c.id),c.file!==void 0&&d(c.file),c.query!==void 0&&i(c.query),c.type!==void 0&&j(c.type),c.caseInsensitive!==void 0&&m(c.caseInsensitive),c.common!==void 0&&B(c.common),c.script!==void 0&&w(c.script),c.collections!==void 0&&I(c.collections),c.languages!==void 0&&v(c.languages),c.run!==void 0&&P(c.run),q("corpus-filtersVisible")===null&&x(!c.id&&!c.file&&!c.run&&(!c.query||!c.collections||!c.languages))},[]);l.useEffect(()=>(window.location.hash&&O(),window.addEventListener("hashchange",O),()=>{window.removeEventListener("hashchange",O)}),[O]),l.useEffect(()=>{if(r!==""){const c=r.split(".")[0];t({query:`^${K(r)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,collections:Object.keys(g.collections).filter(F=>{var $;return(($=g.collections[F])==null?void 0:$.id)===c}),languages:[G]}),o("")}},[r,t]),l.useEffect(()=>{if(h!==""){const c=h.split(".")[0];t({query:`^${K(h)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,collections:Object.keys(g.collections).filter(F=>{var $;return(($=g.collections[F])==null?void 0:$.id)===c}),languages:[G]}),d("")}},[h,t]),l.useEffect(()=>{if(k){const c={query:C,type:f,caseInsensitive:D,common:p,script:u,collections:A,languages:L};window.location.hash=U(c),t(c),P(!1)}},[k,t]);const ue=c=>{c.preventDefault(),q("corpus-filtersVisible")||M("corpus-filtersVisible",b.toString());const F={query:C,type:f,caseInsensitive:D,common:p,script:u,collections:A,languages:L};window.location.hash=U(F),t(F)},de=()=>{a()},he=()=>{const c=!b;x(c),M("corpus-filtersVisible",c.toString())},ge=c=>{const F=c.target.value;ne(F)&&j(F)},V=Y.includes(e),fe=V||C.length===0||A.length===0||L.length===0||e==="waiting";return s.jsxs("form",{className:"search search-form",onSubmit:ue,children:[s.jsxs("div",{className:"search-bar",children:[s.jsxs("div",{className:"item-group",children:[s.jsx("label",{htmlFor:"query",children:n("query")}),s.jsx("input",{type:"text",name:"query",id:"query",value:C,onChange:c=>i(c.target.value)}),s.jsxs("div",{className:"btn-alternate-container",children:[s.jsx("input",{id:"submit",type:"submit",className:V?"invisible":"visible",value:n("search"),disabled:fe}),s.jsx("button",{type:"button",className:V?"visible":"invisible",onClick:de,disabled:!V,children:n("cancel")})]}),s.jsx("button",{type:"button",className:b?"active":void 0,onClick:he,children:n("filters")}),s.jsx("select",{name:"type",id:"type",onChange:ge,value:f,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:_.map(c=>s.jsx("option",{value:c,children:n(`searchType.${c}`)},c))})]}),s.jsxs("div",{className:"item-group search-option-group",children:[s.jsxs("div",{className:"search-option",children:[s.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:D,onChange:c=>m(c.target.checked)}),s.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),s.jsxs("div",{className:"search-option",children:[s.jsx("input",{type:"checkbox",name:"common",id:"common",checked:p,onChange:c=>B(c.target.checked)}),s.jsx("label",{htmlFor:"common",children:n("common")})]}),s.jsxs("div",{className:"search-option",children:[s.jsx("input",{type:"checkbox",name:"script",id:"script",checked:u,onChange:c=>w(c.target.checked)}),s.jsx("label",{htmlFor:"script",children:n("script")})]})]})]}),s.jsx(Ke,{filtersVisible:b,collections:A,setCollections:I,languages:L,setLanguages:v})]})}function et({hash:e}){const{t}=E(),a=n=>{const r=new URL(window.location.href);r.hash=e,"share"in navigator&&(n.preventDefault(),navigator.share({url:r.toString()}))};return s.jsx("a",{href:e,rel:"bookmark noreferrer",target:"_blank",title:t("share"),onClick:a,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:s.jsx("path",{d:"M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z",fill:"currentColor"})})})}function tt({src:e,active:t=!0}){const a=l.useRef(null);return l.useEffect(()=>{var n;(n=a.current)==null||n.classList.add("spinner-stopped")},[]),l.useEffect(()=>{const n=a.current;if(n!==null){const r=()=>{t||n.classList.add("spinner-stopped")};return n.addEventListener("animationiteration",r),()=>{n.removeEventListener("animationiteration",r)}}},[t]),s.jsx("img",{ref:a,className:`spinner ${t?"spinner-active":"spinner-inactive"}`,src:e,alt:""})}function st({progress:e}){const{t}=E(),a=Math.min(Math.max(0,e*100),100);return s.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":t("progressBar.title"),"aria-valuenow":a,children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-bar-complete",style:{width:`${a}%`}})}),s.jsx("div",{className:"progress-bar-text",children:t("progressBar.value",pe(e))})]})}function nt({hash:e,callback:t}){const{t:a}=E();return s.jsx("a",{href:e,rel:"bookmark noreferrer",title:a("viewNearby"),onClick:t,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"-64 0 512 512",children:s.jsx("path",{d:"M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120z",fill:"currentColor"})})})}function at({callback:e}){const{t}=E();return s.jsx("button",{className:"link",title:t("copy"),onClick:e,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"-64 0 512 512",children:s.jsx("path",{d:"M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z",fill:"currentColor"})})})}function rt(e,t,a,n){return e.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(r,o,h)=>`<a class="speaker" href="#${U({query:o,type:"exact",caseInsensitive:!1,common:!1,script:!0,collections:[t],languages:[a],run:!0})}" title="${n}">${h}</a>`)}const Q=e=>{const t=document.getElementById("results"),a=document.getElementById("results-section0"),n=document.getElementById(`results-section${e}`);t&&a&&n&&(t.scrollTop=n.offsetTop-a.offsetTop)};function ot({headers:e}){const{t}=E();return s.jsx("nav",{className:"results-jump",children:s.jsxs("select",{name:"jump",id:"jump",onChange:a=>Q(parseInt(a.target.value,10)),value:"",children:[s.jsx("option",{value:"",disabled:!0,children:t("jumpTo")}),e.map((a,n)=>(n===0||e[n-1]!==a)&&s.jsx("option",{value:n,children:a},n))]})})}function ct(){const{t:e}=E();return s.jsx("div",{className:"results-rendering",children:e("status.rendering")})}function it({id:e}){return s.jsx("td",{className:"results-table-actions-cell",children:s.jsxs("div",{className:"results-table-actions",children:[s.jsx(et,{hash:`#id=${e}`}),s.jsx(nt,{hash:`#file=${e.split(".").slice(0,-1).join(".")}`})]})},"actions")}function lt({collection:e,file:t,languages:a,lines:n}){const{t:r}=E(),o=a.indexOf(G),h=a.map(m=>m===G?Ne:m),d=r("viewSpeaker"),C=g.collections[e].speaker!==void 0,i=h.map(m=>N.dir(m)),f=i.every(m=>m===i[0]),j=l.useRef(null),D=()=>{const m=j.current,p=window.getSelection();p!==null&&m!==null&&(p.removeAllRanges(),p.selectAllChildren(m),document.execCommand("copy"),p.removeAllRanges())};return s.jsx("div",{className:"results-table-container",children:s.jsxs("table",{ref:j,className:`results-table collection-${g.collections[e].id??e.toLowerCase()} file-${t}`,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[o!==-1?s.jsx("th",{className:"results-table-actions-cell",children:s.jsx(at,{callback:D})}):null,a.map(m=>s.jsx("th",{children:s.jsx("abbr",{title:r(`languages:${m}.name`),children:r(`languages:${m}.code`)})},m))]})}),s.jsx("tbody",{dir:f&&i[0]!==N.dir()?i[0]:void 0,children:n.map((m,p)=>s.jsxs("tr",{children:[o!==-1?s.jsx(it,{id:m[o]}):null,m.map((B,u)=>s.jsx("td",{lang:h[u],dir:f?void 0:i[u],dangerouslySetInnerHTML:{__html:C?rt(B,e,a[u],d):B}},u))]},p))})]})})}function ut({lines:e,index:t,sectionOffset:a,offset:n,limit:r,onShowSection:o,...h}){const{t:d}=E(),C=Math.max(0,Math.min(e.length,n-a)),i=Math.max(0,Math.min(e.length,n+r-a)),f=C!==0||i!==void 0?e.slice(C,i):e;return s.jsxs(s.Fragment,{children:[C!==0?s.jsx("button",{className:"results-notice",onClick:o(a,t),children:d("tablePartial",{count:C})}):null,C!==i&&s.jsx(lt,{...h,lines:f},t),i!==void 0&&i<e.length?s.jsx("button",{className:"results-notice",onClick:o(a+i,t),children:d("tablePartial",{count:e.length-i})}):null]})}function dt({header:e,displayHeader:t,...a}){const[n,r]=l.useState(s.jsx(ct,{}));return l.useEffect(()=>{a.offset>=a.sectionOffset&&a.offset<a.sectionOffset+a.lines.length&&Q(a.index)},[a.offset]),l.useEffect(()=>{r(s.jsx(ut,{...a}))},Object.values(a)),s.jsxs("section",{id:`results-section${a.index}`,className:"results-section",children:[s.jsx("h2",{className:t?void 0:"d-none",children:e}),n]})}function ht({status:e,progress:t,results:a,limit:n=je}){const{t:r}=E(),[o,h]=l.useState(!0),[d,C]=l.useState(!1),[i,f]=l.useState(2),[j,D]=l.useState(0),[m,p]=l.useState(!0),[B,u]=l.useState(0),w=(v,k)=>()=>{u(v),Q(k)};l.useEffect(()=>{u(0)},[a]);const[A,I,L]=l.useMemo(()=>{let v=0;const k=a.map(({collection:b,file:x})=>r("tableHeader",{collection:r(`collections:${b}.name`),file:r(`files:${x}`),interpolation:{escapeValue:!1}})),P=[];return a.forEach((b,x)=>{P.push(s.jsx(dt,{header:k[x],...b,index:x,sectionOffset:v,offset:B,limit:n,onShowSection:w},[B,x].join(","))),v+=b.lines.length}),[v,k,P]},[a,n,B,N.language]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"search results-status",children:[I.length>1?s.jsx(ot,{headers:I}):s.jsx("div",{className:"results-status-text",children:r(`status.${e.split(".",1)[0]}`)}),s.jsx(tt,{src:Ae,active:Y.includes(e)}),A>n?s.jsxs("div",{className:"results-nav",children:[s.jsxs("div",{children:[s.jsx("span",{className:"results-nav-range-long",children:r("displayedRange.long",{count:A,start:B+1,end:Math.min(A,B+n)})}),s.jsx("span",{className:"results-nav-range-short",children:r("displayedRange.short",{count:A,start:B+1,end:Math.min(A,B+n)})})]}),s.jsx("button",{className:"button-square",disabled:B===0,onClick:()=>u(Math.max(0,B-n)),title:r("loadPrev"),children:r("loadPrevIcon",{limit:n})}),s.jsx("button",{className:"button-square",disabled:B+n>=A,onClick:()=>u(Math.min(Math.floor(A/n)*n,B+n)),title:r("loadNext"),children:r("loadNextIcon",{limit:n})})]}):s.jsx(st,{progress:t}),s.jsxs("div",{className:"results-toggle",children:[s.jsx("button",{className:o?"button-square active":"button-square",onClick:()=>{h(!o)},title:r("showVariables"),children:r("showVariablesIcon")}),s.jsx("button",{className:d?"button-square active":"button-square",onClick:()=>{C(!d)},title:r("showAllCharacters"),children:r("showAllCharactersIcon")}),s.jsx("button",{className:i!==2?"button-square active":"button-square",onClick:()=>{f((i+1)%3)},title:r("showGender"),children:r("showGenderIcon",{context:i})}),s.jsx("button",{className:j!==0?"button-square active":"button-square",onClick:()=>{D((j+1)%3)},title:r("showPlural"),children:r("showPluralIcon",{context:j})}),s.jsx("button",{className:m?"button-square active":"button-square",onClick:()=>{p(!m)},title:r("showFurigana"),children:s.jsx("span",{className:"results-toggle-furigana",children:r("showFuriganaIcon")})})]})]}),s.jsx("main",{id:"results",className:`search results app-window variables-${o?"show":"hide"} control-${d?"show":"hide"} gender-${i} number-${j} furigana-${m?"show":"hide"}`,children:L})]})}const gt=[["805868F0",451848],["FE0A4516",184505],["0E6B4AFC",186358],["38089687",184678],["C8E18522",192736],["AC075F40",185187],["BC8E428D",451830],["E0EDED5F",452016],["AE888233",184382],["42CE5E23",186162],["49A1D761",184638],["E6BE2C39",192693],["EEE6AA0B",184987],["D0A898D8",914491],["B4916E10",247699],["9353A098",247605],["01E40379",247360],["B9271014",255341],["7A3C7531",247525],["93D27A9D",853930],["50D2D70E",371161],["297D48D7",423562],["9E40D227",443434],["7E45FF40",433301],["E53FA927",443211],["DB38E4EE",716552],["F5DB65C4",853759],["CB8106C0",371328],["847BC0BC",423799],["F4F9E121",443569],["31E85F86",433496],["CCEB35BA",443147],["B5AC5376",716517],["C258E1C0",1188380],["AA0CCAD6",516532],["061F929E",583183],["9EB0BB7D",617996],["3154E257",605519],["287D9986",626416],["1B6B811F",56247],["47F479B5",219921],["E98655B9",240723],["A5BA82AE",251904],["66BF6AE1",243507],["24BE0C34",265357],["48268292",253204],["15DA0A67",80381],["B5C9124E",206414],["D50DFB6F",212463],["8BDC97A0",209249],["7F5DBF9C",203357],["BAFD4554",223099],["79526023",209842],["464B1550",105715],["51475FA2",326267],["C1B05D7D",337789],["B91D2631",351308],["3F0AD689",343626],["812A1AB9",378330],["AA61A5BF",362267],["2B0D4B93",43358],["C569D066",379754],["1F01624A",389899],["F2E4C7A1",389997],["A168B9AE",402610],["A11EF663",389956],["7960625F",417275],["CCF50F5C",391877],["E8DE934D",360602],["3A1A9B1D",65345],["3786C80B",618280],["E80F9575",660717],["1B5BA04A",660274],["DBF1C3E9",687124],["1502C3B3",668403],["6987F71E",718812],["AB6E2D5B",670969],["CE015249",619080],["4D550F2C",73843],["CA4C7397",712304],["09387C12",649155],["87323133",664116],["BF786056",662567],["4F666F0D",741706],["A153E1D9",663558],["1C4BB4DA",642295],["9C34BDCD",74122],["B7574077",14277],["F995C30A",418914],["9D60674E",238161],["30FC1626",431312],["0F0B9315",251501],["2BD96831",427975],["B2A835DB",231433],["C25D8FD2",440869],["B4D5380B",253667],["19CCEDE0",435286],["A7392F1D",238116],["21A4F991",471647],["F5456BBE",286258],["319F6C84",434313],["D35D93AA",255061],["3202D6A1",432445],["5821F1C6",228581],["8098B211",108529],["DA8465B6",23285],["D986A44C",689295],["D26EF998",345597],["6788D3EB",725690],["D853AAFB",366512],["809A966C",661231],["71BD1A82",321837],["A7E66C77",686073],["6263F6C4",364277],["1C541F50",676483],["80392CBD",345983],["8C28A3B1",743806],["5C726113",400249],["E4D9A8A1",709524],["F010E441",388964],["611CB7AE",654063],["270BED6B",326680],["F9AC014E",41653],["7CBC93B4",13564],["5D77F2D3",290600],["19096712",193156],["99B3AF25",304677],["7EF08E1A",204728],["DCB617AB",309647],["33EF4A6B",218185],["B199F277",317847],["E4933814",237126],["C3A6023B",305573],["34ECA43C",204825],["4E05F7C3",331242],["B9A4C5A5",249282],["719F6CF7",336580],["D4C5FC1F",253405],["B779A7AA",293411],["AB306EB4",193921],["D0453ADC",52057],["A49819C8",20978],["D5E64271",361359],["81DC14F2",251358],["607BD37E",380246],["79364FB4",267071],["C6F7E9BB",391949],["55CB3423",261236],["F3C1F5D1",412072],["A445144E",275169],["04BED485",395485],["32F9174D",249289],["4C011AA6",431932],["3B6F2B5D",311428],["A159FCC1",426053],["EFBA305C",281565],["9727DB13",363094],["00F9CD07",247291],["66850A84",49635],["F7C003F5",19275],["D6E2E088",251306],["3A9A986B",221524],["FC0C8ADD",262055],["3155AD9B",234129],["36A24DD7",264111],["7DE90361",266183],["B1B911A6",281427],["D154C0F5",292914],["914BC9E8",269703],["FCB58A19",255431],["73318A95",286031],["1DACFB2B",294363],["E024B96B",284632],["0482085E",291207],["DBACF489",250082],["9EEA28B7",220906],["6C6BDA9A",248873],["615402EC",225468],["E7763E5F",251831],["DCF080B4",228710],["E9064BC7",57142],["515C63BC",30391],["B029ECEF",287029],["D7459F7B",351512],["C2849705",299536],["76226F39",371546],["925DA459",304276],["1332A7BF",417674],["1E24F599",322366],["08238B58",462128],["72449731",311083],["4DC4D0F7",410852],["2A36BB82",331386],["B6CCB707",473448],["485DE0B0",327958],["B0BDACD1",465944],["ECDEB54B",285212],["6046FCAE",351632],["8015D11D",285461],["B97E3074",357817],["291B1F2D",289137],["C47A8D10",363279],["947DEFAC",71629],["240382DC",18043],["22BB8EAB",188876],["302291C2",91131],["ED47E5D9",195352],["11244D4D",96834],["2CBDBCC7",187488],["F5AC0CBD",98149],["1BD744DF",197108],["EB57D60A",112736],["74009DC0",190833],["9C442EE2",100960],["92E8777F",202082],["CE8D3F9A",122417],["CC023BDC",196961],["E340650B",112906],["A6EFC3DE",187016],["7FA572E1",92454],["DF53E61B",184665],["CC40F25B",99588],["DDB2813E",186375],["67540C8C",98427],["F88C7D51",109707],["D06EC6B0",47268],["BC465CEB",327255],["DABDD117",249057],["DB6499F8",343106],["A1E9A260",263024],["471BC992",354632],["D72D5490",301521],["51B5A2A2",361058],["C14BE010",316566],["A2946CD4",355436],["6DD06B2E",294483],["3313DDAF",375355],["B755DFD7",338573],["A6BC01B8",354857],["C109C728",315868],["2E7DE187",335443],["ACBD302C",263043],["C2771E86",342022],["3239020C",280033],["72F20635",340759],["7DD6502E",283225],["A3C49BBF",99393],["87647E62",438279],["9616FC8D",459527],["A2BCEA38",441003],["224162EA",473430],["1B465C57",456582],["FF560BEE",502888],["690BFF6E",465097],["1C088BF9",412634],["BDB8EF03",416941],["EC2A02E5",430970],["868957D1",74049],["A142B3F1",24108],["AE7A3398",217519],["5F77F1A4",230194],["C7DC5911",212569],["EFC20517",250558],["B1E9377A",212889],["C74A122A",247223],["D054DE70",207469],["CE8B0601",241619],["ED88D7E1",217691],["FC76E487",250690],["D766E68F",209904],["0B78B3D6",250516],["7707196A",196581],["D6E20DF4",198422],["AEE9875F",197067],["7F1BE555",196414],["2E5BAC17",197521],["1365CBAA",206782],["9D22F3E2",142866],["1D2F4BF3",71136],["B38DE6C7",428923],["C0C91D78",523598],["99B6F5E4",400940],["D1F7D9A3",527195],["DB66385A",410479],["8D9AFC15",540864],["2A68B3C4",396595],["E0AC173E",500289],["300A80E9",415883],["23719FF4",547694],["B53002F4",401220],["14C7FDE3",535541],["B6B8EBAE",376872],["6D12C9E1",440546],["EDD3DC38",377240],["B2485F5C",432631],["A12D9827",380373],["4C32D9D0",449342],["EA1432F5",14904],["CA9CD9BD",185298],["E266968F",191903],["97ECABBA",187664],["87A27B31",197388],["04872EBD",196569],["8E557D83",204124],["1605EDD5",197879],["26D93D24",11886],["95CC0171",294807],["C46156B1",261280],["9EA398A5",234498],["68062841",229744],["656E796C",230208],["A80BEC67",254904],["A190FDDD",241132],["3356A778",27511],["F8317CFE",168076],["F71850AB",154401],["E554DABC",154242],["C7E7F875",160914],["2C56E000",156325],["A55CCB2E",163853],["DE9A5332",149658],["9920B1E3",3505],["CCD878B1",11682],["CC445D0F",10530],["A01D9E8C",10488],["3B409C23",11138],["0B197BEA",10982],["4452D813",11317],["D958ECBF",11107],["4028E267",10276],["38B7948A",85967],["B3B75E50",63779],["34A6C0E7",63992],["F1318B98",68269],["CA1ADAA3",67235],["12F3987F",68652],["0E2E5E91",66187],["8EA29A66",28943],["A6D0F48B",252507],["BA9443EB",266550],["886D0304",287489],["606FC990",290952],["DC096C52",284717],["A25EDA41",300791],["B5DC512F",288797],["41303CFE",254545],["BF4FC8A0",260380],["7DEBD604",262359],["2439FD69",119685],["45B39AA0",695517],["178F33F9",724549],["34E25F98",770042],["9A31C8AB",773486],["2B197D76",756785],["6CBB2A0F",817937],["64A00033",763166],["B2E49CB7",695621],["DE6516AD",711468],["42A2B796",713699]],W=(e,t,a)=>`corpus/${e}/${t}_${a}.txt.gz`,ft=e=>ie(e).size,mt=async(e,t)=>{const[a,n]=await le(e,t);return(n==null?void 0:n.hash)===a.hash?0:a.size},Ct=async e=>{try{const t=await X(),a=(await Promise.all(e.flatMap(n=>g.collections[n].languages.flatMap(r=>g.collections[n].files.map(o=>mt(t,W(n,r,o))))))).reduce((n,r)=>n+r,0);return t.close(),a}catch{return e.flatMap(t=>g.collections[t].languages.flatMap(a=>g.collections[t].files.map(n=>ft(W(t,a,n))))).reduce((t,a)=>t+a,0)}},Bt=e=>"/poke-corpus/"+e,kt=async(e,t,a)=>{const n=Bt(a),[r,o]=await le(t,a);return(o==null?void 0:o.hash)!==void 0?[await Dt(e,n),o.hash===r.hash]:[void 0,!1]},ee=gt,Et=Object.fromEntries(Object.entries(g.collections).flatMap(([e,t])=>t.languages.flatMap(a=>t.files.map(n=>W(e,a,n)))).map((e,t)=>[e,{hash:ee[t][0],size:ee[t][1]}])),pt="corpus",H="files",X=()=>{const e=indexedDB.open(pt);return new Promise((t,a)=>{e.onupgradeneeded=()=>{e.result.createObjectStore(H),e.transaction!==null&&(e.transaction.oncomplete=()=>{console.log("Created object store")})},e.onsuccess=()=>t(e.result),e.onerror=()=>a(e.error)})},ie=e=>Et[e],At=(e,t)=>{const r=e.transaction([H],"readonly").objectStore(H).get(t);return new Promise((o,h)=>{r.onsuccess=()=>o(r.result),r.onerror=()=>h(r.error)})},St=(e,t)=>{const r=e.transaction([H],"readwrite").objectStore(H).delete(t);return new Promise((o,h)=>{r.onsuccess=()=>o(r.result!==void 0),r.onerror=()=>h(r.error)})},le=async(e,t)=>[ie(t),await At(e,t)],yt=()=>X().then(e=>{const n=e.transaction(["files"],"readwrite").objectStore("files").clear();return e.close(),new Promise((r,o)=>{n.onsuccess=()=>r(n===void 0),n.onerror=()=>o(n.error)})}).catch(e=>new Promise((t,a)=>a(e))),Nt=()=>X().then(e=>{const n=e.transaction([H],"readonly").objectStore(H).getAllKeys();return e.close(),new Promise((r,o)=>{n.onsuccess=()=>r(n.result.filter(h=>typeof h=="string")),n.onerror=()=>o(n.error)})}).catch(e=>new Promise((t,a)=>a(e))),jt="corpus",Ht=async()=>await caches.open(jt),Dt=async(e,t)=>{try{const a=await e.match(t);return a}catch(a){console.error(a);return}},te="corpus-warn",bt=2e7;function Ft({showModal:e,limit:t}){const{t:a}=E(),n=l.useRef(null),[r,o]=l.useState("initial"),[h,d]=l.useState(0),[C,i]=l.useState([]),[f,j]=l.useState(q(te)!=="false");l.useEffect(()=>{const u=()=>{n.current!==null&&!Y.includes(r)&&(console.log("Terminating worker!"),n.current.terminate(),n.current=null)};return window.addEventListener("blur",u),()=>{window.removeEventListener("blur",u)}},[r]);const D=l.useCallback(u=>{u.data.complete?(o(u.data.status),d(u.data.progress),i(u.data.results),we.includes(u.data.status)&&e({message:a(`statusModal.${u.data.status}`),buttons:[{message:a("statusModal.buttons.ok"),autoFocus:!0}]})):(o(u.data.status),d(u.data.progress))},[]),m=()=>{n.current!==null&&(console.log("Terminating worker!"),n.current.terminate(),n.current=null,o("initial"),d(0))},p=l.useCallback(u=>{i([]),u.query.length>0&&u.collections.length>0&&u.languages.length>0&&(n.current===null&&(console.log("Creating new worker..."),n.current=new xe,n.current.addEventListener("message",D)),d(0),n.current.postMessage(u))},[]),B=l.useCallback(async u=>{if(o("waiting"),f){const w=await Ct(u.collections);if(w>bt){e({message:a("searchModal.message",De(w)),checkbox:{message:a("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:a("searchModal.buttons.yes"),callback:()=>p(u),checkboxCallback:A=>{j(!A),M(te,(!A).toString())}},{message:a("searchModal.buttons.no"),callback:()=>o("initial"),autoFocus:!0}],cancelCallback:()=>o("initial")});return}}p(u)},[f]);return s.jsxs(s.Fragment,{children:[s.jsx(Ze,{status:r,postToWorker:B,terminateWorker:m}),s.jsx(ht,{status:r,progress:h,results:C,limit:t})]})}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));export{wt as O,st as P,Lt as S,X as a,W as b,g as c,kt as d,Nt as e,St as f,Ht as g,Ct as h,yt as i};
